<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>運行日報一覧</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- ヘッダー -->
  <header>
    <div class="navbar">
      <a href="index.html" class="logo"><i class="fas fa-bus"></i></a>
      <nav class="nav-links" id="navLinks">
        <a href="../top.html">・ホーム</a>
        <a href="#">・遷移先２</a>
        <a href="#">・遷移先３</a>
        <a href="#">・遷移先４</a>
        <a href="#">・遷移先５</a>
        <a href="#" class="logout"><i class="fas fa-sign-out-alt"></i> ログアウト</a>
      </nav>
      <div class="hamburger" id="hamburger"><i class="fas fa-bars"></i></div>
    </div>
  </header>

  <!-- メイン -->
  <main class="document-list-page">
    <h1 class="page-title">運行日報一覧</h1>

    <!-- フィルタエリア -->
    <div class="filter-box">
      <input type="text" id="searchInput" placeholder="🔍 キーワード検索...">
      <select id="driverSort">
        <option value="asc">名前順（昇順）</option>
        <option value="desc">名前順（降順）</option>
      </select>
      <select id="dateSort">
        <option value="">📅 日付ソート</option>
        <option value="new">新しい順</option>
        <option value="old">古い順</option>
      </select>
    </div>

    <!-- 一覧テーブル -->
    <div class="table-container">
      <table id="reportTable">
        <thead>
          <tr>
            <th>ID</th>
            <th>ドライバー</th>
            <th>日付</th>
            <th>車両番号</th>
            <th>走行距離(km)</th>
            <th>詳細</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>001</td>
            <td>山田 太郎</td>
            <td>2025-09-10</td>
            <td>AB-1234</td>
            <td>120</td>
            <td><a href="report-detail.html?id=001" class="detail-btn">詳細</a></td>
          </tr>
          <tr>
            <td>002</td>
            <td>佐藤 花子</td>
            <td>2025-09-09</td>
            <td>CD-5678</td>
            <td>90</td>
            <td><a href="report-detail.html?id=002" class="detail-btn">詳細</a></td>
          </tr>
          <tr>
            <td>003</td>
            <td>田中 一郎</td>
            <td>2025-09-08</td>
            <td>EF-9012</td>
            <td>150</td>
            <td><a href="report-detail.html?id=003" class="detail-btn">詳細</a></td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- 戻るボタン -->
    <div class="bottom-left">
      <a href="document-menu.html" class="back-btn">← 書類管理メニューに戻る</a>
    </div>
  </main>

  <!-- フッター -->
  <footer>
    <p>© 2025 運行管理システム | All Rights Reserved</p>
  </footer>

  <script>
    // ハンバーガーメニュー
    const hamburger = document.getElementById("hamburger");
    const navLinks = document.getElementById("navLinks");
    hamburger.addEventListener("click", () => {
      navLinks.classList.toggle("active");
    });

    // 🔍 検索機能
    const searchInput = document.getElementById("searchInput");
    searchInput.addEventListener("keyup", () => {
      const filter = searchInput.value.toLowerCase();
      const rows = document.querySelectorAll("#reportTable tbody tr");
      rows.forEach(row => {
        row.style.display = row.innerText.toLowerCase().includes(filter) ? "" : "none";
      });
    });

    // 👥 ドライバーソート
    const driverSort = document.getElementById("driverSort");
    driverSort.addEventListener("change", () => sortTable(1, driverSort.value));

    // 📅 日付ソート
    const dateSort = document.getElementById("dateSort");
    dateSort.addEventListener("change", () => sortTable(2, dateSort.value));

    function sortTable(colIndex, order) {
      const table = document.getElementById("reportTable");
      const rows = Array.from(table.tBodies[0].rows);
      let sorted;
      if (colIndex === 2) {
        // 日付ソート
        sorted = rows.sort((a, b) => {
          const dateA = new Date(a.cells[colIndex].innerText);
          const dateB = new Date(b.cells[colIndex].innerText);
          return order === "new" ? dateB - dateA : dateA - dateB;
        });
      } else {
        // ドライバー名ソート
        sorted = rows.sort((a, b) => {
          const nameA = a.cells[colIndex].innerText;
          const nameB = b.cells[colIndex].innerText;
          return order === "asc" ? nameA.localeCompare(nameB) : nameB.localeCompare(nameA);
        });
      }
      table.tBodies[0].append(...sorted);
    }
  </script>
</body>
</html>
